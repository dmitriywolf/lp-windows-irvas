document.addEventListener("DOMContentLoaded",()=>{"use strict";(()=>{function e(e,t,n){let o=document.querySelectorAll(e),a=document.querySelector(t),c=document.querySelector(n);o.forEach(e=>{e.addEventListener("click",e=>{e.target&&e.preventDefault(),a.style.display="block",a.classList.add("animated","zoomIn"),document.body.classList.add("open-popup")})}),c.addEventListener("click",()=>{a.style.display="none",document.body.classList.remove("open-popup")}),window.addEventListener("keydown",(function(e){27===e.keyCode&&(e.preventDefault(),a.style.display="none",document.body.classList.remove("open-popup"))}))}e(".popup--engineer__button",".popup--engineer",".popup--engineer .popup__close"),e(".popup--callback__button",".popup--callback",".popup--callback .popup__close"),e(".popup--calculate__button",".popup--calculate",".popup--calculate .popup__close")})();(()=>{function e(e,t){let n,o=document.querySelectorAll(e),a=document.querySelectorAll(t);function c(){o.forEach(e=>{e.classList.remove("is-active")}),this.classList.add("is-active"),n=this.getAttribute("data-tab-name"),function(e){a.forEach(t=>{t.classList.contains(e)?t.classList.add("is-active","animated","zoomIn"):t.classList.remove("is-active","zoomIn")})}(n)}o.forEach(e=>{e.addEventListener("click",c)})}e(".decoration-nav-tab",".decoration-tab-content"),e(".glazing-nav-tab",".glazing-tab-content")})();(()=>{let e=e=>e<=9?"0"+e:e;((t,n)=>{let o=document.querySelector(t),a=o.querySelector(".days"),c=o.querySelector(".hours"),l=o.querySelector(".minutes"),s=o.querySelector(".seconds"),r=setInterval(u,1e3);function u(){let t=(e=>{let t=Date.parse(e)-Date.parse(new Date),n=Math.floor(t/1e3%60),o=Math.floor(t/1e3/60%60),a=Math.floor(t/1e3/60/60%24);return{total:t,days:Math.floor(t/1e3/60/60/24),hours:a,minutes:o,seconds:n}})(n);a.textContent=e(t.days),c.textContent=e(t.hours),l.textContent=e(t.minutes),s.textContent=e(t.seconds),t.total<=0&&(clearInterval(r),a.textContent="00",c.textContent="00",l.textContent="00",s.textContent="00",clearInterval(r))}u()})("#timer","August 30 2020")})();(()=>{let e=document.querySelectorAll("form"),t=document.querySelectorAll("input");document.querySelectorAll('input[type="tel"]').forEach(e=>{e.addEventListener("input",()=>{e.value=e.value.replace(/\D/,"")})});const n="Загрузка...",o="Спасибо! Мы свяжемся с Вами в течении 15 минут",a="Извините! Что-то пошло не так...",c="./img/answer-loading.gif",l="./img/answer-success.png";e.forEach(e=>{e.addEventListener("submit",s=>{s.preventDefault();let r=document.createElement("div");r.classList.add("popup__answer"),document.body.append(r);let u=document.createElement("img");u.setAttribute("src",c),r.append(u);let i=document.createElement("p");i.textContent=n,r.append(i);let d=document.createElement("div");d.classList.add("img__failed");(async(e,t)=>{let n=await fetch(e,{method:"POST",body:t});return await n.text()})("./server.php",new FormData(e)).then(e=>{u.setAttribute("src",l),i.textContent=o}).catch(()=>{u.remove(),r.prepend(d),i.textContent=a}).finally(()=>{t.forEach(e=>{e.value=""}),setTimeout(()=>{r.classList.remove("flipInX"),r.classList.add("flipOutX"),r.remove()},4e3)})})})})()});